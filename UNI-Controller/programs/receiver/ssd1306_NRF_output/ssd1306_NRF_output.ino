//part1: stick photos
static const unsigned char PROGMEM Drone_Photo_bmp[] =
  {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x03,0x80,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x1f,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0x3c,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,0x00,0xf8,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xf2,0x00,0x03,0xfe,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xfc,0x70,0x03,0xff,0xe0,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x02,0x00,0x7e,0x5c,0x03,0xfc,0xf8,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x1f,0xff,0x87,0xf0,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x7f,0xf7,0xf9,0xe0,0x01,0xc0,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x0c,0x00,0x00,0x7f,0xf7,0xff,0x80,0x00,0x7c,0x00,0x00,0x00,0x00
  ,0x00,0x3f,0xff,0xfe,0x00,0x00,0xfe,0xff,0xff,0xbc,0x00,0x1f,0x80,0x00,0x00,0x00
  ,0x00,0x03,0xff,0xff,0x80,0x00,0x7f,0xfb,0xff,0xfe,0x00,0x07,0xfc,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x7c,0x01,0x00,0x3f,0xff,0xff,0xfc,0x00,0x00,0xfc,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x7d,0x8f,0x80,0xff,0xff,0x3f,0xff,0xc0,0x00,0xff,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x7f,0xf3,0xff,0xe1,0xff,0x3f,0xff,0xe0,0x03,0xff,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x01,0x00,0x03,0xff,0x7f,0xff,0xc0,0x7f,0xfe,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x01,0xc0,0x00,0x1f,0x7f,0x9f,0xdf,0xff,0xff,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0xe0,0x00,0x0f,0xff,0x9f,0xc0,0x2e,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x38,0x00,0x1f,0xff,0x9f,0x80,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x0e,0x00,0x07,0xff,0x9f,0xc0,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x03,0x81,0x0f,0xc7,0x3f,0xc0,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0xff,0xff,0xf8,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x01,0xff,0xff,0xfc,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x03,0xff,0xf0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x06,0xff,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x0f,0xff,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x39,0xfe,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0xe0,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  ,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
  };

//preinitialize
const byte addr[] = { 0xCC,0xCE,0xCC,0xCE,0xCC };
#include <SPI.h>
#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>
#define OLED_RESET 4
Adafruit_SSD1306 display(OLED_RESET);

#define NUMFLAKES 10
#define XPOS 0
#define YPOS 1
#define DELTAY 2

#if (SSD1306_LCDHEIGHT != 64)
#error("Height incorrect, please fix Adafruit_SSD1306.h!");
#endif
//char incomingByte[32];
//ssd1306s above//////////////

#include "RF24.h"
RF24 radioControl(7, 8); // CE pin, CSN pin
const byte pipe = 1; // assigned pipe number
//rf24 receiver part

//data part
byte result[8];
int throttle = 0 ;
int yaw = 0 ;
int pitch = 0 ;
int roll = 0 ;
int mode = 0 ;
//

void setup()   {                
  Serial.begin(9600);
  display.begin(SSD1306_SWITCHCAPVCC, 0x3C);  // initialize with the I2C addr 0x3C (for the 128x32)
  //check for displayer -- init done
  display.clearDisplay();  
  display.drawBitmap(0, 0,  Drone_Photo_bmp, 128, 64, 1);  
  display.display();
  delay(1000);
  display.clearDisplay();  
  //RF24 below
  radioControl.begin();
  radioControl.setChannel(15); //setting up channel(frequency)
  radioControl.setPALevel(RF24_PA_MIN);
  radioControl.setDataRate(RF24_250KBPS);
  radioControl.openReadingPipe(pipe, addr); //open up radio
  radioControl.startListening(); //start listening
  display.setTextSize(2);
  display.setTextColor(WHITE);
  display.setCursor(0,15);
  display.println("Control Radio Ready! ");
  display.display();
  delay(1000);
  display.clearDisplay();  
//  
  // Writer name
  display.setTextSize(1.5);
  display.setTextColor(WHITE);
  display.setCursor(0,0);
  display.print("Made by: ");
  display.setTextColor(BLACK, WHITE); // 'inverted' text
//
  display.setCursor(0,15);
  display.setTextSize(2);
  display.setTextColor(WHITE);
  display.println("Hientz Ben"); 
  display.display();
  delay(2000);
  display.clearDisplay();
//
  display.setCursor(0,25);
  display.setTextSize(1.5);
  display.setTextColor(WHITE);
  display.println("please open the controller "); 
  display.display();
  display.clearDisplay();
}


void loop() {
      // send data only when you receive data:
  if (radioControl.available(&pipe)) {
    radioControl.read(&result, sizeof(result));  
  for (int cnt = 0; cnt < 5; cnt++)
    {
      if (cnt == 0)
        mode = result[cnt];
      else if (cnt == 1)
        throttle = result [cnt];
      else if (cnt == 2)
        yaw = result [cnt];      
      else if (cnt == 3)
        pitch = result [cnt];
      else if (cnt == 4)   
        roll = result [cnt];             
    }
    Serial.print("mode: ");
    //Serial.print(throttle); 
    Serial.print("  Throttle: ");
    Serial.print(throttle);  
    Serial.print("  Yaw: ");
    Serial.print(yaw);
    Serial.print("  Pitch: ");
    Serial.print(pitch); 
    Serial.print("  Roll: ");
    Serial.print(roll);
    Serial.print("  t.Size: ");
    Serial.println(sizeof(result));   
  
         
    display.clearDisplay();  
    display.setCursor(0,0);
    display.setTextSize(2);
    display.setTextColor(WHITE);
    display.print("mode: "); 
    display.println(mode); 
    display.setTextSize(1);
    display.print(" Thr: "); 
    display.print(throttle); 
    display.print(" Yaw: "); 
    display.println(yaw);
    display.print(" Pit: "); 
    display.print(pitch); 
    display.print(" rol: "); 
    display.println(roll);               
    display.display(); 
    }
    else
    {
        display.clearDisplay(); 
        display.setCursor(0,25);
        display.setTextSize(1);
        display.setTextColor(WHITE);
        display.println("please open the controller "); 
        display.display();    
    }
    delay(25);
}
